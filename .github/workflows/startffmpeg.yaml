
# File: .github/workflows/workflowForFile.yml

on:
  workflow_dispatch:
    inputs:
      m3u8_url:
        description: ''
        required: true
        type: string
      livestream_token:
        description: ''
        required: true
        type: string

name: AzureCLISampleForFile

jobs:

  build-and-deploy:
    runs-on: ubuntu-latest
    steps:

    - name: Azure Login
      uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}

    - name: Checkout
      uses: actions/checkout@v1

    - name: Azure CLI script file
      uses: azure/CLI@v1
      with:
        azcliversion: 2.30.0
        inlineScript: |
          docker run mcr.microsoft.com/azure-cli az container exec --resource-group rg-livestream-dev --name ffmpeglivestream --exec-command "ffmpeg -fflags -igndts -hide_banner -i https://video-weaver.jfk04.hls.ttvnw.net/v1/playlist/CqMEZhFtlda-MK3_fniz9LNhQ6Ml06DxQ94gM-pvzG-eAuLmp_GDpchpk95v4xmjjW56dEP_i01j1QBLuNTpZr1XnW7VPEBr4aeWYCno7XFusCs1J1o0xy1NiI3t99wh6yfz97gCELK2KMIpVhqBeqz2K9CPhlWiiijv3dJY_MbaqMp5zngcNcXG5XH4WqVZwgOZPoKULg0jEaOKAp4BwY-CLB5oocdhA9IawHgTLqEivlL5zI0F9A7VLamugM9MU3Rsvkw7guyKT8UJTeWtATD1D0j3whXvO3g_yuWad75F1NstS3uj0yrfxBhCf04867o4ePzTVe24mmQwhsKsXSfPX7YZrDdnVz62tmkvQ-rzYB5QkoNQL7q4f3yM6fQJUjUK5dqL_U3Su2c-wFhaiHOj7T_eW-1JQkD4T-AwBJ-3-7niDnZ-sR-Ot_l-vvNBoqzroIlEteqiExl7kxOgRY8oT2UnjCGiosXv1EVwJ3OorjvXBua02iFshnPH12O8TIhSB7yeih5bUykgtqKjnXE74mFHMW5xjztE1fNEpg0QvL0WuKVS7xNyXoCrcO7SoTCOxd93y8qcs3LDleI_AVL_u6yU65qvCXo-78YzmEEABxJvhZ67UsaKm7PFe4dxnvu5iEhEqJtBiaV-qYyXf5qM1UUnf7NsDqTUw-UXf1k7wqTCTjD5hXWUkCbAUvISGQ5eiNX5J7IznDqROLlLyXDakMHaxxoMezYAguWQFo9fPcU0IAEqCXVzLXdlc3QtMjChBg.m3u8 -bsf:a aac_adtstoasc -c copy -f flv rtmp://rtmp.livepeer.com/live/ef15-6p9j-vmm0-w55w"
